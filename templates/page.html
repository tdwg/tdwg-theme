{% extends "base.html" %}

{# Set cover_image_url and caption based on metadata #}
{% if page.cover_image %}
    {% if page.cover_image.startswith("http") %}
        {% set cover_image_url = page.cover_image %}
    {% else %}
        {% set cover_image_url = SITEURL + "/static/cover_images/" + page.cover_image %}
    {% endif %}
    {% if page.cover_image_ref and page.cover_image_by %}
        {%set cover_image_caption = "<a href=\"" + page.cover_image_ref + "\">Image</a> by " + page.cover_image_by %}
    {% endif %}
{% endif %}


{# Blocks #}
{% block title %}{{ page.title }}{% endblock %}

{% block content %}
        <a href="#" class="float-right">Edit on GitHub</a>

        <h1>{{ page.title }}</h1>
        
        <p class="theme-tags">
        {% for tag in page.tags %}
            <span class="badge badge-pill badge-light">{{ tag }}</span>
        {% endfor %}
        </p>

        {% if page.intro %}
            <p class="lead">{{ page.intro }}</p>
        {% endif %}

        {% if page.cover_image %}
            <figure class="theme-cover-image">
                <div style="background-image: url('{{ cover_image_url }}')"></div>
                {% if cover_image_caption %}
                    <figcaption>{{ cover_image_caption }}</figcaption>
                {% endif %}
            </figure>
        {% endif %}

        <div class="theme-page-content">
            {% if page.github_url %}
                <a class="btn btn-lg btn-primary mb-4" href="{{ page.github_url }}">Find us on GitHub</a>
            {% endif %}

            {{ page.content }}
        </div>
{% endblock %}
